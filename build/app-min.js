$(document).ready(function(){var e=[],t=JSON.parse(localStorage.getItem("fermentables")),a=JSON.parse(localStorage.getItem("fermentablesFiltered")),o=[],r=JSON.parse(localStorage.getItem("hops")),c=JSON.parse(localStorage.getItem("hopsFiltered")),n=[],p=JSON.parse(localStorage.getItem("yeasts")),s=JSON.parse(localStorage.getItem("yeastsFiltered")),d=function(e,t,a,o,r,c,n){var p=e,s=t,l=n;$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/"+l+"/?key=166f0b6348fdccde864dc9aecb3d50bb&p="+p.toString()).done(function(e){r=r.concat(e.data),p+=1,s>=p?d(p,s,a,o,r,c,n):(a=r,localStorage.setItem(l,JSON.stringify(a)),i(a,o,c,n))})},i=function(e,t,a,o){for(var r=[],c=0;c<e.length;c++)e[c].hasOwnProperty(a)&&(r=r.concat(e[c]));t=r,localStorage.setItem(o+"Filtered",JSON.stringify(t)),l(t,o)},l=function(e,t){for(var a=$(document).find("#"+t+"-selector").children("optgroup"),o=0;o<e.length;o++)if("yeasts"!==t){var r=e[o].name;$(a).append("<option>"+r+"</option>")}else{var c=e[o].supplier,n=e[o].productId,r=e[o].name,p=e[o].yeastFormat,s=e[o].yeastType;$(a).append("<option>"+r+" - "+c+" "+n+" - "+p+" "+s+" yeast</option>")}};t?l(t,"fermentables"):$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/fermentables/?key=166f0b6348fdccde864dc9aecb3d50bb",function(){}).done(function(o){var r=o.currentPage,c=o.numberOfPages;e=e.concat(o.data),c>r&&d(r+1,c,t,a,e,"potential","fermentables")}),r?l(c,"hops"):$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/hops/?key=166f0b6348fdccde864dc9aecb3d50bb",function(){}).done(function(e){var t=e.currentPage,a=e.numberOfPages;o=o.concat(e.data),a>t&&d(t+1,a,r,c,o,"alphaAcidMin","hops")}),p?l(s,"yeasts"):(console.log("loop 1"),$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/hops/?key=166f0b6348fdccde864dc9aecb3d50bb",function(){}).done(function(e){var t=e.currentPage,a=e.numberOfPages;n=n.concat(e.data),a>t&&d(t+1,a,p,s,n,"supplier","yeasts")})),$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/adjuncts/?key=166f0b6348fdccde864dc9aecb3d50bb&p=3",function(){}).done(function(e){console.log(e)})});