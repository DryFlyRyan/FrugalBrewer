$(document).ready(function(){console.log("doc ready");var e=[],t=JSON.parse(localStorage.getItem("fermentables")),o=JSON.parse(localStorage.getItem("fermentablesFiltered")),a=[],r=JSON.parse(localStorage.getItem("hops")),c=JSON.parse(localStorage.getItem("hopsFiltered")),n=[],s=JSON.parse(localStorage.getItem("yeasts")),p=JSON.parse(localStorage.getItem("yeastsFiltered")),d=function(e,t,o,a,r,c,n){var s=e,p=t,i=n;$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/"+i+"/?key=166f0b6348fdccde864dc9aecb3d50bb&p="+s.toString()).done(function(e){r=r.concat(e.data),s+=1,p>=s?d(s,p,o,a,r,c,n):(o=r,localStorage.setItem(i,JSON.stringify(o)),l(o,a,c,n))})},l=function(e,t,o,a){for(var r=[],c=0;c<e.length;c++)e[c].hasOwnProperty(o)&&(r=r.concat(e[c]));t=r,localStorage.setItem(a+"Filtered",JSON.stringify(t)),i(t,a)},i=function(e,t){for(var o=$(document).find("#"+t+"-selector").children("optgroup"),a=0;a<e.length;a++)if("yeasts"!==t){var r=e[a].name;$(o).append("<option>"+r+"</option>")}else{var c=e[a].supplier,n=e[a].productId,r=e[a].name,s=e[a].yeastFormat,p=e[a].yeastType;$(o).append("<option>"+r+" - "+c+" "+n+" - "+s+" "+p+" yeast</option>")}};t?i(t,"fermentables"):$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/fermentables/?key=166f0b6348fdccde864dc9aecb3d50bb",function(){}).done(function(a){var r=a.currentPage,c=a.numberOfPages;e=e.concat(a.data),c>r&&d(r+1,c,t,o,e,"potential","fermentables")}),r?i(c,"hops"):$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/hops/?key=166f0b6348fdccde864dc9aecb3d50bb",function(){}).done(function(e){var t=e.currentPage,o=e.numberOfPages;a=a.concat(e.data),o>t&&d(t+1,o,r,c,a,"alphaAcidMin","hops")}),s?i(p,"yeasts"):(console.log("loop 1"),$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/hops/?key=166f0b6348fdccde864dc9aecb3d50bb",function(){}).done(function(e){var t=e.currentPage,o=e.numberOfPages;n=n.concat(e.data),o>t&&d(t+1,o,s,p,n,"supplier","yeasts")})),$.get("https://cors-anywhere.herokuapp.com/http://api.brewerydb.com/v2/adjuncts/?key=166f0b6348fdccde864dc9aecb3d50bb&p=3",function(){}).done(function(e){console.log(e)});var b=(JSON.parse(localStorage.getItem("photoData")),"s9rbwtf6gbnjt7tghrpyfwva");$.ajax({type:"GET",url:"https://api.gettyimages.com/v3/search/images?fields=id,title,thumb,referral_destinations&sort_order=best&phrase=homebrew",beforeSend:function(e){e.setRequestHeader("Api-Key",b)}}).done(function(e){console.log("got data"),console.log(e)})});